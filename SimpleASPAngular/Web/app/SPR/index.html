<div class="container">
    <div ng-show="showLoading">Loading...</div>
    <div ng-show="!showLoading">
        <h2>Filter SPR</h2>
        <hr>
        <div style="display:inline-block; width:100%; padding: 10px;">
            <div style="display:block; float:left; width:10%;">Search:</div>
            <div style="display:block; float:left; width:20%;">
                <input type="text" ng-model="filter.main" ng-change="showFilter()" />
            </div>
        </div>
        <div style="display:inline-block; width:100%; padding: 10px;">
            <div style="display:block; float:left; width:10%;">Penyetujuan:</div>
            <div style="display:block; float:left; width:20%;">
                <input type="radio" ng-model="filter.penyetujuan" ng-value="1" ng-click="showFilter()" />1
                <input type="radio" ng-model="filter.penyetujuan" ng-value="2" ng-click="showFilter()" />2
                <input type="radio" ng-model="filter.penyetujuan" value="" ng-click="showFilter()" />Semua
            </div>
        </div>
        <div style="display:inline-block; width:100%; padding: 10px;">
            <div style="display:block; float:left; width:10%;">Ada Detail:</div>
            <div style="display:block; float:left; width:20%;">
                <input type="radio" ng-model="filter.adaDetail" ng-value="true" ng-click="showFilter()" />Ya
                <input type="radio" ng-model="filter.adaDetail" ng-value="false" ng-click="showFilter()" />Tidak
                <input type="radio" ng-model="filter.adaDetail" value="" ng-click="showFilter()" />Semua
            </div>
        </div>
        <div style="display:inline-block; width:100%; padding: 10px;">
            <div style="display:block; float:left; width:10%;">Status:</div>
            <div style="display:block; float:left; width:20%;">
                <input type="radio" ng-model="filter.status" ng-value="true" ng-click="showFilter()" />Ya
                <input type="radio" ng-model="filter.status" ng-value="false" ng-click="showFilter()" />Tidak
                <input type="radio" ng-model="filter.status" value="" ng-click="showFilter()" />Semua
            </div>
        </div>
        
        <div style="display:inline-block; width:100%; padding: 10px;">
            <button class="btn btn-warning" ng-click="clearFilter()"><i class="fa fa-trash-o" aria-hidden="true"></i> Clear Filter</button>
        </div>
        <hr>
        <div style="display:inline-block; width:100%; padding: 10px;">
            <button class="btn btn-primary" ng-click="addSPR()"><i class="fa fa-plus" aria-hidden="true"></i> Add SPR</button>        
            <ul uib-pagination 
                class="pagination-sm"
                style="float:right; margin:0; padding-top: 3px;"
                ng-model="currentPage"
                total-items="filteredHeaders.length"
                items-per-page="pagingOpt.itemsPerPage"
                max-size="pagingOpt.maxSize"  
                boundary-links="true"
                force-ellipses="true"
                ng-change="pageChanged()">
            </ul>    
        </div>
        <!-- Table -->
        <div style="display:inline-block; width:100%; padding: 10px;">
            <table class="table table-striped table-condensed table-bordered">
                <tr>
                    <th>Options</th>
                    <th>Kode SPR</th>
                    <th>Zona</th>
                    <th>Tgl SPR</th>
                    <th>Tujuan SPR</th>
                    <th>Nama Peminta</th>
                    <th>Nama Penyetuju 1</th>
                    <th>Nama Penyetuju 2</th>
                    <th>Ada Detail</th>
                    <th>Status</th>
                </tr>
                <tr ng-if="filteredHeaders.length == 0">
                    <td colspan="10">No data found</td>
                </tr>
                <tr ng-if="filteredHeaders.length > 0" 
                    ng-repeat="header in filteredHeaders = (headers 
                            | filter: mainFilter
                            | filter: {jumlahPenyetujuan: filter.penyetujuan, detailExists: filter.adaDetail, status: filter.status})
                            | limitTo: pagingOpt.itemsPerPage : pagingOpt.itemsPerPage * (currentPage - 1)">
                    <td style="text-align: center;">
                        <button class="btn btn-primary" ng-click="EditHeader(header)" title="Edit Header">
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </button>
                        <button class="btn btn-primary" ng-click="AddDetail(header)" title="Add Detail">
                            <i class="fa fa-plus" aria-hidden="true"></i>
                        </button>
                        <button class="btn btn-primary" ng-click="EditDetail(header.Details)" title="Edit Detail" ng-disabled="header.Details.length == 0">
                            <i class="fa fa-list" aria-hidden="true"></i>
                        </button>
                        <button class="btn btn-primary" ng-click="Delete(header)" title="Delete">
                            <i class="fa fa-trash-o" aria-hidden="true"></i>
                        </button>
                    </td>
                    <td>{{ header.Kode_Spr }}</td>
                    <td>{{ header.Nama_Zona }}</td>
                    <td>{{ header.Tanggal_Spr | date:'dd-MMM-yyyy' }}</td>
                    <td>{{ header.Tujuan_SPR }}</td>
                    <td>{{ header.Nama_Peminta }}</td>
                    <td>{{ header.Nama_Penyetuju1 }}</td>
                    <td>{{ header.Nama_Penyetuju2 }}</td>
                    <td>{{ header.Details.length > 0 ? 'Ada' : 'Tidak ada' }}</td>
                    <td>{{ header.status ? 'Aktif' : 'Non-Aktif' }}</td>
                </tr>
            </table>
        </div>
    </div>
</div>